
{% extends "main_template.html" %}
{% load static %}
{% load jformat %}

{% block title %}لیست زیباجویان {% endblock title %}    
    
    
    {% block extra_css %}<link rel="stylesheet" href="{% static "css/patients_list.css" %}">{% endblock extra_css %}
    
{% block content %}
<body class="min-h-screen bg-gray-50">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <header class="mb-10 text-center">
            <h1 class="text-4xl font-bold text-pink-600 mb-2">لیست زیباجویان</h1>
            <p class="text-gray-600">مرکز تخصصی زیبایی و پوست</p>
            <div class="w-24 h-1 bg-pink-400 mx-auto mt-4 rounded-full"></div>
        </header>
        
        <!-- Search and Filter -->
        <div class="mb-8 bg-white rounded-xl shadow-md p-6">
            <div class="flex flex-col md:flex-row gap-4 items-center justify-between">
                <div class="relative w-full md:w-96">
                    <input type="text" placeholder="جستجوی زیباجو..." 
                           class="search-input w-full pr-10 pl-4 py-3 rounded-lg border border-gray-300 focus:border-pink-400 transition-all">
                    <i class="fas fa-search absolute right-3 top-3.5 text-gray-400"></i>
                </div>



                <div class="flex gap-3 w-full md:w-auto">
                    <select class="bg-gray-100 border border-gray-300 text-gray-700 py-3 px-4 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-200" name="" id="select_sort" onchange="select_sort()">
                        {% if sort_type == "0" %}
                        <option value="0" selected>همه موارد</option>
                        <option value="1">زیباجویان جدید</option>
                        <option value="2">زیباجویان قدیمی</option>
                        {% elif sort_type == "1" %}
                        <option value="0">همه موارد</option>
                        <option value="1" selected>زیباجویان جدید</option>
                        <option value="2">زیباجویان قدیمی</option>
                        {% elif sort_type == "2" %}
                        <option value="0">همه موارد</option>
                        <option value="1">زیباجویان جدید</option>
                        <option value="2" selected>زیباجویان قدیمی</option>
                        {% endif %}
                    </select>


                </div>



            </div>
        </div>
        
        <!-- Patient List -->
        {% include "patient_panel/partials/patients_list.html" %}
        
        <!-- Pagination -->
        
        <div class="mt-10 flex justify-center">
        <nav class="flex items-center gap-1">

        {# دکمه رفتن به صفحه قبل #}
        {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}"
               class="w-10 h-10 flex items-center justify-center rounded-lg bg-white shadow-md text-pink-600 hover:bg-pink-50 transition-all">
                <i class="fas fa-chevron-right"></i>
            </a>
        {% else %}
            <span class="w-10 h-10 flex items-center justify-center rounded-lg bg-gray-200 text-gray-400 cursor-not-allowed">
                <i class="fas fa-chevron-right"></i>
            </span>
        

        {# حلقه شماره صفحات با منطق ساده‌تر #}
        {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
                <span class="w-10 h-10 flex items-center justify-center rounded-lg bg-pink-600 text-white shadow-md">{{ num }}</span>
            {% elif num <= 2 %}
                <a href="?page={{ num }}" class="w-10 h-10 flex items-center justify-center rounded-lg bg-white shadow-md hover:bg-pink-50 transition-all">{{ num }}</a>
            {% elif num == 3 %}
                <span class="px-2">...</span>
            {% elif num >= page_obj.number|add:'-1' and num <= page_obj.number|add:'1' %}
                <a href="?page={{ num }}" class="w-10 h-10 flex items-center justify-center rounded-lg bg-white shadow-md hover:bg-pink-50 transition-all">{{ num }}</a>
            {% elif num == page_obj.paginator.num_pages|add:'-2' %}
                <span class="px-2">...</span>
            {% elif num > page_obj.paginator.num_pages|add:'-2' %}
                <a href="?page={{ num }}" class="w-10 h-10 flex items-center justify-center rounded-lg bg-white shadow-md hover:bg-pink-50 transition-all">{{ num }}</a>
            {% endif %}
        {% endfor %}

        {# دکمه رفتن به صفحه بعد #}
        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}"
               class="w-10 h-10 flex items-center justify-center rounded-lg bg-white shadow-md text-pink-600 hover:bg-pink-50 transition-all">
                <i class="fas fa-chevron-left"></i>
            </a>
        {% else %}
            <span class="w-10 h-10 flex items-center justify-center rounded-lg bg-gray-200 text-gray-400 cursor-not-allowed">
                <i class="fas fa-chevron-left"></i>
            </span>
        {% endif %}

        </nav>
            </div>
            {% endif %}

    </div>

    <script src="{% static "js/patients_list.js" %}">
    </script>

</body>
{% endblock content %}